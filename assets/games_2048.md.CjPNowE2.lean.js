import{_ as b,p as _,v as Z,c as i,o as c,j as s,a as x,t as h,N as A,F as I,B as E,n as N}from"./chunks/framework.ZWmXjvV8.js";const C={class:"game-container"},O={class:"score"},$=JSON.parse('{"title":"2048","description":"","frontmatter":{},"headers":[],"relativePath":"games/2048.md","filePath":"games/2048.md","lastUpdated":1736921119000}'),j={name:"games/2048.md"},B=Object.assign(j,{setup(P){const t=_([]),v=_(0),m=_(!1);function g(){p(),u(),u(),document.addEventListener("keydown",S)}function p(){t.value=Array(4).fill().map(()=>Array(4).fill(0))}function u(){const a=[];if(t.value.forEach((o,r)=>{o.forEach((n,R)=>{n===0&&a.push({x:r,y:R})})}),a.length===0)return;const{x:e,y:l}=a[Math.floor(Math.random()*a.length)];t.value[e][l]=Math.random()<.9?2:4}function S(a){if(m.value)return;let e=!1;switch(JSON.stringify(t.value),a.key){case"ArrowUp":e=k();break;case"ArrowDown":e=D();break;case"ArrowLeft":e=w();break;case"ArrowRight":e=y();break;default:return}e&&(u(),G())}function w(){return f(t.value)}function y(){t.value=t.value.map(e=>e.reverse());const a=f(t.value);return t.value=t.value.map(e=>e.reverse()),a}function k(){t.value=d(t.value);const a=f(t.value);return t.value=d(t.value),a}function D(){t.value=d(t.value),t.value=t.value.map(e=>e.reverse());const a=f(t.value);return t.value=t.value.map(e=>e.reverse()),t.value=d(t.value),a}function f(a){let e=!1;for(let l=0;l<a.length;l++){const o=a[l],r=o.filter(n=>n!==0);for(let n=0;n<r.length-1;n++)r[n]===r[n+1]&&(r[n]*=2,v.value+=r[n],r.splice(n+1,1),e=!0);for(;r.length<4;)r.push(0);JSON.stringify(o)!==JSON.stringify(r)&&(e=!0),a[l]=r}return e}function d(a){return a[0].map((e,l)=>a.map(o=>o[l]))}function G(){for(let a=0;a<4;a++)for(let e=0;e<4;e++)if(t.value[a][e]===0)return;for(let a=0;a<4;a++)for(let e=0;e<3;e++)if(t.value[a][e]===t.value[a][e+1]||t.value[e][a]===t.value[e+1][a])return;m.value=!0,alert(`游戏结束！得分：${v.value}`)}function L(){v.value=0,m.value=!1,p(),u(),u()}return Z(()=>{g()}),(a,e)=>(c(),i("div",null,[e[0]||(e[0]=s("h1",{id:"_2048",tabindex:"-1"},[x("2048 "),s("a",{class:"header-anchor",href:"#_2048","aria-label":'Permalink to "2048"'},"​")],-1)),s("div",C,[s("div",O,"得分："+h(v.value),1),s("div",{class:"grid",style:A(`width: ${4*110}px`)},[(c(!0),i(I,null,E(t.value,(l,o)=>(c(),i("div",{key:o,class:"row"},[(c(!0),i(I,null,E(l,(r,n)=>(c(),i("div",{key:n,class:N(["cell",`cell-${r}`])},h(r||""),3))),128))]))),128))],4),s("button",{onClick:L,class:"reset-button"},"重新开始")])]))}}),z=b(B,[["__scopeId","data-v-4b76f2e4"]]);export{$ as __pageData,z as default};
