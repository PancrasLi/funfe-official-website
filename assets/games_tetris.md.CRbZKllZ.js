import{_ as b,p as i,v as P,c as A,j as r,a as R,t as M,o as W}from"./chunks/framework.BfTgYifh.js";const D={class:"game-container"},N={class:"score"},j=["width","height"],X=JSON.parse('{"title":"俄罗斯方块","description":"","frontmatter":{},"headers":[],"relativePath":"games/tetris.md","filePath":"games/tetris.md","lastUpdated":1736921119000}'),G={name:"games/tetris.md"},U=Object.assign(G,{setup(V){const u=i(null),s=i(null),v=i(null),f=i(0),m=[[[1,1,1,1]],[[1,1],[1,1]],[[1,1,1],[0,1,0]],[[1,1,1],[1,0,0]],[[1,1,1],[0,0,1]],[[1,1,0],[0,1,1]],[[0,1,1],[1,1,0]]],a=i(null),o=i([]);function E(){s.value=u.value.getContext("2d"),O(),h(),document.addEventListener("keydown",B),d()}function O(){o.value=Array(20).fill().map(()=>Array(10).fill(0))}function h(){const e=m[Math.floor(Math.random()*m.length)];a.value={shape:e,x:Math.floor(10/2)-Math.floor(e[0].length/2),y:0}}function C(){s.value.clearRect(0,0,u.value.width,u.value.height),y(),g()}function y(){o.value.forEach((e,t)=>{e.forEach((n,l)=>{n&&(s.value.fillStyle="#777",s.value.fillRect(l*30,t*30,29,29))})})}function g(){s.value.fillStyle="#f00",a.value.shape.forEach((e,t)=>{e.forEach((n,l)=>{n&&s.value.fillRect((a.value.x+l)*30,(a.value.y+t)*30,29,29)})})}function B(e){switch(e.key){case"ArrowLeft":c(-1,0)&&a.value.x--;break;case"ArrowRight":c(1,0)&&a.value.x++;break;case"ArrowDown":c(0,1)&&a.value.y++;break;case"ArrowUp":w();break}C()}function c(e,t){return a.value.shape.every((n,l)=>n.every((_,Z)=>{const p=a.value.x+Z+e,S=a.value.y+l+t;return _===0||p>=0&&p<10&&S<20&&(S<0||o.value[S][p]===0)}))}function w(){const e=a.value.shape[0].map((n,l)=>a.value.shape.map(_=>_[l]).reverse()),t=a.value.shape;a.value.shape=e,c(0,0)||(a.value.shape=t)}function x(){c(0,1)?a.value.y++:(I(),k(),h(),c(0,0)||K()),C()}function I(){a.value.shape.forEach((e,t)=>{e.forEach((n,l)=>{n&&(o.value[a.value.y+t][a.value.x+l]=n)})})}function k(){let e=0;for(o.value=o.value.filter(t=>{const n=t.every(l=>l===1);return n&&e++,!n});e>0;)o.value.unshift(Array(10).fill(0)),f.value+=100*e,e--}function d(){v.value||(v.value=setInterval(x,1e3))}function K(){clearInterval(v.value),v.value=null,alert(`游戏结束！得分：${f.value}`),L()}function L(){f.value=0,O(),h(),d()}return P(()=>{E()}),(e,t)=>(W(),A("div",null,[t[0]||(t[0]=r("h1",{id:"俄罗斯方块",tabindex:"-1"},[R("俄罗斯方块 "),r("a",{class:"header-anchor",href:"#俄罗斯方块","aria-label":'Permalink to "俄罗斯方块"'},"​")],-1)),r("div",D,[r("div",N,"得分："+M(f.value),1),r("canvas",{ref_key:"canvas",ref:u,width:10*30,height:20*30,class:"game-canvas"},null,8,j),r("div",{class:"controls"},[r("button",{onClick:d},"开始游戏"),r("button",{onClick:L},"重新开始")])])]))}}),Y=b(U,[["__scopeId","data-v-a3de3cdc"]]);export{X as __pageData,Y as default};
