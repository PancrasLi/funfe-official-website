import{_ as K,p as o,v as Q,x as Z,c as p,o as m,j as d,e as P,a0 as s,t as B,F as z,a as C}from"./chunks/framework.DR0w2vtD.js";const ee={class:"game-container"},ae={class:"game-controls"},le={key:0,class:"direction-controls"},ue={class:"game-buttons"},te={class:"game-instructions"},ie=JSON.parse('{"title":"打砖块","description":"","frontmatter":{"title":"打砖块"},"headers":[],"relativePath":"games/breakout.md","filePath":"games/breakout.md","lastUpdated":1737369701000}'),ve={name:"games/breakout.md"},ne=Object.assign(ve,{setup(oe){const c=o(!1),i=o(!1),k=o(0),g=o(3),f=o(!1),n=o(800),x=o(600),w=o(!1),r=o(null),t=o(null),e=o({x:0,y:0,dx:3,dy:-3,radius:8,speed:4}),a=o({x:0,width:100,height:15,speed:6,dx:0}),b=5,_=9,L=80,M=20,S=10,U=50,V=35,h=o([]);function R(){const l=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEEAD"];for(let u=0;u<_;u++){h.value[u]=[];for(let v=0;v<b;v++)h.value[u][v]={x:0,y:0,status:1,color:l[v]}}}function X(){t.value&&(t.value.beginPath(),t.value.arc(e.value.x,e.value.y,e.value.radius,0,Math.PI*2),t.value.fillStyle="#333",t.value.fill(),t.value.closePath())}function $(){t.value&&(t.value.beginPath(),t.value.roundRect(a.value.x,x.value-a.value.height,a.value.width,a.value.height,8),t.value.fillStyle="#333",t.value.fill(),t.value.closePath())}function j(){if(t.value){for(let l=0;l<_;l++)for(let u=0;u<b;u++)if(h.value[l][u].status===1){const v=l*(L+S)+V,W=u*(M+S)+U;h.value[l][u].x=v,h.value[l][u].y=W,t.value.beginPath(),t.value.roundRect(v,W,L,M,4),t.value.fillStyle=h.value[l][u].color,t.value.fill(),t.value.closePath()}}}function q(){t.value&&(t.value.font="20px Arial",t.value.fillStyle="#333",t.value.fillText(`得分: ${k.value}`,8,30))}function I(){t.value&&(t.value.font="20px Arial",t.value.fillStyle="#333",t.value.fillText(`生命: ${g.value}`,n.value-80,30))}function G(){for(let l=0;l<_;l++)for(let u=0;u<b;u++){const v=h.value[l][u];v.status===1&&e.value.x>v.x&&e.value.x<v.x+L&&e.value.y>v.y&&e.value.y<v.y+M&&(e.value.dy=-e.value.dy,v.status=0,k.value+=10,k.value===b*_*10&&(i.value=!0,c.value=!1))}}function J(){if(e.value.x+=e.value.dx,e.value.y+=e.value.dy,(e.value.x+e.value.dx>n.value-e.value.radius||e.value.x+e.value.dx<e.value.radius)&&(e.value.dx=-e.value.dx),e.value.y+e.value.dy<e.value.radius)e.value.dy=-e.value.dy;else if(e.value.y+e.value.dy>x.value-e.value.radius)if(e.value.x>a.value.x&&e.value.x<a.value.x+a.value.width){const l=(e.value.x-(a.value.x+a.value.width/2))/(a.value.width/2);e.value.dx=l*e.value.speed,e.value.dy=-Math.sqrt(e.value.speed*e.value.speed-e.value.dx*e.value.dx)}else g.value--,g.value===0?(i.value=!0,c.value=!1):(e.value.x=n.value/2,e.value.y=x.value-30,e.value.dx=3,e.value.dy=-3,a.value.x=(n.value-a.value.width)/2)}function Y(){a.value.x+=a.value.dx,a.value.x<0?a.value.x=0:a.value.x+a.value.width>n.value&&(a.value.x=n.value-a.value.width)}function A(){t.value&&(t.value.clearRect(0,0,n.value,x.value),j(),X(),$(),q(),I(),G(),c.value&&!f.value&&(J(),Y()),i.value||requestAnimationFrame(A))}function D(l){l.key==="Right"||l.key==="ArrowRight"?a.value.dx=a.value.speed:l.key==="Left"||l.key==="ArrowLeft"?a.value.dx=-a.value.speed:(l.key===" "||l.key==="Spacebar")&&(!c.value&&!i.value?N():f.value=!f.value)}function T(l){(l.key==="Right"||l.key==="ArrowRight"||l.key==="Left"||l.key==="ArrowLeft")&&(a.value.dx=0)}function F(l){l.preventDefault();const u=l.touches[0].clientX-r.value.offsetLeft;u>0&&u<n.value&&(a.value.x=u-a.value.width/2)}function H(){a.value.dx=-a.value.speed}function O(){a.value.dx=a.value.speed}function y(){a.value.dx=0}function N(){i.value&&(k.value=0,g.value=3,R(),i.value=!1),e.value.x=n.value/2,e.value.y=x.value-30,e.value.dx=3,e.value.dy=-3,a.value.x=(n.value-a.value.width)/2,c.value=!0,f.value=!1}function E(){const u=r.value.parentElement.clientWidth;w.value=u<600,n.value=Math.min(800,u),x.value=Math.min(600,u*.75),r.value.width=n.value,r.value.height=x.value,a.value.width=w.value?80:100,a.value.height=w.value?12:15,e.value.radius=w.value?6:8,a.value.x=(n.value-a.value.width)/2}return Q(()=>{t.value=r.value.getContext("2d"),R(),E(),A(),document.addEventListener("keydown",D),document.addEventListener("keyup",T),r.value.addEventListener("touchmove",F),window.addEventListener("resize",E)}),Z(()=>{var l;document.removeEventListener("keydown",D),document.removeEventListener("keyup",T),(l=r.value)==null||l.removeEventListener("touchmove",F),window.removeEventListener("resize",E)}),(l,u)=>(m(),p("div",null,[d("div",ee,[d("canvas",{ref_key:"canvas",ref:r,class:"game-canvas"},null,512),d("div",ae,[w.value?(m(),p("div",le,[d("button",{class:"direction-btn",onTouchstart:s(H,["prevent"]),onTouchend:s(y,["prevent"]),onMousedown:s(H,["prevent"]),onMouseup:s(y,["prevent"]),onMouseleave:s(y,["prevent"])},"←",32),d("button",{class:"direction-btn",onTouchstart:s(O,["prevent"]),onTouchend:s(y,["prevent"]),onMousedown:s(O,["prevent"]),onMouseup:s(y,["prevent"]),onMouseleave:s(y,["prevent"])},"→",32)])):P("",!0),d("div",ue,[c.value?(m(),p("button",{key:1,onClick:u[0]||(u[0]=v=>f.value=!f.value)},B(f.value?"继续":"暂停"),1)):(m(),p("button",{key:0,onClick:N},B(i.value?"重新开始":"开始游戏"),1))])]),d("div",te,[!c.value&&!i.value?(m(),p(z,{key:0},[u[1]||(u[1]=C(" 按空格键或点击开始按钮开始游戏")),u[2]||(u[2]=d("br",null,null,-1)),u[3]||(u[3]=C(" 使用方向键或触摸控制挡板移动 "))],64)):P("",!0),i.value?(m(),p(z,{key:1},[C(" 游戏结束！得分："+B(k.value),1)],64)):P("",!0)])])]))}}),re=K(ne,[["__scopeId","data-v-c8c05c6c"]]);export{ie as __pageData,re as default};
