import{p as v,h as P,c as r,o,j as t,ah as V,e as h,aj as U,t as f,F as q,B as z,N as Q,n as _,_ as W,q as I,a as X,ai as Y,b as Z}from"./chunks/framework.DR0w2vtD.js";const K={class:"json-viewer"},ee={class:"json-toolbar"},te={class:"search-box"},se={key:0,class:"match-count"},le=["onClick"],ae={key:1,class:"toggle-placeholder"},ne={key:0,class:"json-key"},oe={__name:"JsonViewer",props:{value:{type:[Object,Array],required:!0},indent:{type:Number,default:2}},setup(T){const d=T,a=v(""),i=v(0),u=v(0),m=v(null),c=v(new Set(["root"])),k=P(()=>{const e=[],n=(s,g=null,x="root",O=0,A=!0)=>{const D=s&&typeof s=="object",M=Array.isArray(s),B=c.value.has(x);if(D){const F=Object.entries(s),E=M?"[":"{",R=M?"]":"}";e.push({indent:O,key:g,value:E,collapsible:!0,expanded:B,path:x,valueClass:"json-bracket"}),B&&F.forEach(([L,H],G)=>{n(H,L,`${x}.${L}`,O+1,G===F.length-1)}),e.push({indent:O,value:R+(A?"":","),valueClass:"json-bracket"})}else e.push({indent:O,key:g,value:p(s)+(A?"":","),valueClass:l(s)})};return n(d.value),e}),S=()=>{if(!a.value){u.value=0,i.value=0;return}const e=k.value.filter(n=>{var s;return(s=n.value)==null?void 0:s.toString().toLowerCase().includes(a.value.toLowerCase())});u.value=e.length,j()},j=()=>{if(u.value===0)return;const e=m.value.querySelectorAll(".highlight");e[i.value]&&e[i.value].scrollIntoView({behavior:"smooth",block:"center"})},w=()=>{i.value<u.value-1?i.value++:i.value=0,j()},y=()=>{i.value>0?i.value--:i.value=u.value-1,j()},N=e=>{c.value.has(e.path)?c.value.delete(e.path):c.value.add(e.path)},J=()=>{const e=C(d.value);c.value=new Set(e)},$=()=>{c.value=new Set(["root"])};function C(e,n="root",s=[]){return s.push(n),e&&typeof e=="object"&&Object.keys(e).forEach(g=>{C(e[g],`${n}.${g}`,s)}),s}function p(e){return typeof e=="string"?`"${e}"`:e===null?"null":String(e)}function l(e){return e===null?"json-null":typeof e=="string"?"json-string":typeof e=="number"?"json-number":typeof e=="boolean"?"json-boolean":""}function b(e){var n;return a.value&&((n=e.value)==null?void 0:n.toString().toLowerCase().includes(a.value.toLowerCase()))}return(e,n)=>(o(),r("div",K,[t("div",ee,[t("div",te,[V(t("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=s=>a.value=s),placeholder:"搜索...",onInput:S},null,544),[[U,a.value]]),u.value>0?(o(),r("span",se,f(i.value+1)+"/"+f(u.value),1)):h("",!0),a.value?(o(),r("button",{key:1,class:"nav-btn",onClick:y,title:"上一个"},"↑")):h("",!0),a.value?(o(),r("button",{key:2,class:"nav-btn",onClick:w,title:"下一个"},"↓")):h("",!0)]),t("div",{class:"actions"},[t("button",{onClick:J,title:"展开全部"},n[1]||(n[1]=[t("span",{class:"icon"},"⊞",-1)])),t("button",{onClick:$,title:"折叠全部"},n[2]||(n[2]=[t("span",{class:"icon"},"⊟",-1)]))])]),t("div",{class:"json-content",ref_key:"contentRef",ref:m},[(o(!0),r(q,null,z(k.value,(s,g)=>(o(),r("div",{key:g,class:"json-line"},[s.collapsible?(o(),r("span",{key:0,class:"toggle",onClick:x=>N(s)},f(s.expanded?"▼":"▶"),9,le)):(o(),r("span",ae)),t("span",{class:_(["line-content",{highlight:b(s),collapsed:!s.expanded&&s.collapsible}]),style:Q({paddingLeft:s.indent*20+"px"})},[s.key?(o(),r("span",ne,'"'+f(s.key)+'":',1)):h("",!0),t("span",{class:_(s.valueClass)},f(s.value),3)],6)]))),128))],512)]))}},ue={class:"tool-header"},re={class:"mode-switch"},ie=["onClick"],ce={key:0,class:"tool-options"},ve={class:"tool-actions"},de={class:"tool-body"},pe={class:"input-panel"},fe={key:0,class:"error-message"},he={class:"output-panel"},me={class:"panel-header"},ye=["value","placeholder"],ke=JSON.parse('{"title":"JSON 格式化工具","description":"在线JSON格式化工具，支持JSON美化、压缩、校验等功能","frontmatter":{"title":"JSON 格式化工具","description":"在线JSON格式化工具，支持JSON美化、压缩、校验等功能"},"headers":[],"relativePath":"tools/encoding/json.md","filePath":"tools/encoding/json.md","lastUpdated":1739271557000}'),be={name:"tools/encoding/json.md"},ge=Object.assign(be,{setup(T){const d=v(""),a=v(null),i=v(2),u=v("format"),m=v(!1),c=v(""),k=P(()=>a.value?u.value==="format"?JSON.stringify(a.value,null,Number(i.value)):u.value==="compress"?JSON.stringify(a.value):"√ JSON 格式正确":"");I(d,p=>{p.trim()?S():(a.value=null,c.value="")},{debounce:300}),I(u,()=>{d.value.trim()&&S()});const S=()=>{try{a.value=JSON.parse(d.value),c.value=""}catch(p){c.value=p.message,a.value=null}},j=async()=>{try{await navigator.clipboard.writeText(k.value),N("已复制到剪贴板")}catch{N("复制失败，请手动复制","error")}},w=()=>{d.value="",a.value=null,c.value=""},y=v({show:!1,message:"",type:"success"}),N=(p,l="success")=>{y.value={show:!0,message:p,type:l},setTimeout(()=>{y.value.show=!1},3e3)},J={name:"JSON示例",type:"object",properties:{string:"这是字符串",number:123,boolean:!0,array:[1,2,3],object:{key:"value"}}},$=()=>{d.value=JSON.stringify(J),S()},C=()=>{m.value=!m.value};return(p,l)=>(o(),r("div",null,[l[7]||(l[7]=t("h1",{id:"json-格式化工具",tabindex:"-1"},[X("JSON 格式化工具 "),t("a",{class:"header-anchor",href:"#json-格式化工具","aria-label":'Permalink to "JSON 格式化工具"'},"​")],-1)),t("div",{class:_(["json-tool",{"is-fullscreen":m.value}])},[t("div",ue,[t("div",re,[(o(),r(q,null,z({format:"格式化",compress:"压缩",validate:"校验"},(b,e)=>t("button",{key:e,class:_({active:u.value===e}),onClick:n=>u.value=e},f(b),11,ie)),64))]),u.value==="format"?(o(),r("div",ce,[l[3]||(l[3]=t("label",null,"缩进：",-1)),V(t("select",{"onUpdate:modelValue":l[0]||(l[0]=b=>i.value=b)},l[2]||(l[2]=[t("option",{value:"2"},"2 空格",-1),t("option",{value:"4"},"4 空格",-1),t("option",{value:"8"},"8 空格",-1)]),512),[[Y,i.value]])])):h("",!0),t("div",ve,[t("button",{onClick:w,class:"clear-btn",title:"清空"},l[4]||(l[4]=[t("span",{class:"icon"},"🗑️",-1)])),t("button",{onClick:C,class:"fullscreen-btn"},f(m.value?"退出全屏":"全屏"),1)])]),t("div",de,[t("div",pe,[t("div",{class:"panel-header"},[l[5]||(l[5]=t("h3",null,"输入 JSON",-1)),t("button",{class:"sample-btn",onClick:$},"加载示例")]),V(t("textarea",{"onUpdate:modelValue":l[1]||(l[1]=b=>d.value=b),placeholder:"请输入 JSON 字符串...",class:_(["json-input",{"has-error":c.value}])},null,2),[[U,d.value]]),c.value?(o(),r("div",fe," ❌ "+f(c.value),1)):h("",!0)]),t("div",he,[t("div",me,[l[6]||(l[6]=t("h3",null,"输出结果",-1)),a.value?(o(),r("button",{key:0,class:"copy-btn",onClick:j,title:"复制到剪贴板"}," 📋 复制 ")):h("",!0)]),u.value==="format"&&a.value?(o(),Z(oe,{key:0,value:a.value,indent:Number(i.value)},null,8,["value","indent"])):(o(),r("textarea",{key:1,value:k.value,readonly:"",class:"json-output",placeholder:u.value==="validate"?"验证结果将显示在这里":"转换结果将显示在这里"},null,8,ye))])]),y.value.show?(o(),r("div",{key:0,class:_(["toast-message",y.value.type])},f(y.value.message),3)):h("",!0)],2)]))}}),Se=W(ge,[["__scopeId","data-v-3d98750e"]]);export{ke as __pageData,Se as default};
