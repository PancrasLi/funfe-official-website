# Cursor Composer 多文件编辑

> **免责声明**：本文档是 [Cursor 官方文档中的 Composer 多文件编辑页面](https://docs.cursor.com/composer)的**第三方非官方中文翻译**，仅供学习参考。内容可能不完全反映最新的官方信息，请以 [Cursor 官方文档](https://docs.cursor.com) 为准。所有商标和版权归 Cursor/Anysphere 公司所有。

> 本文档介绍 Cursor 的 Composer 功能，这是一个强大的多文件编辑工具，允许您同时处理多个文件并进行大规模代码更改。

## 导航菜单

### 入门指南
* [欢迎使用 Cursor](/cursor-welcome)
* [安装指南](/cursor-install)
* [从 VS Code 迁移](/cursor-migrate-vscode)
* [入门介绍](/cursor-introduction)
* [常见问题解答](/cursor-faq)

### 编辑器功能
* [Tab 智能补全](/cursor-tab)
  * [概述](/cursor-tab)
  * [Tab vs GitHub Copilot](/cursor-tab-vs-copilot)
  * [自动导入](/cursor-auto-import)
  * [高级功能](/cursor-tab-advanced)
* [Agent 智能代理](/cursor-agent)
* [Composer 多文件编辑](#cursor-composer-多文件编辑)
* [Ask 智能问答](/cursor-ask)
* [⌘K 内联编辑](/cursor-cmd-k)
* [AI 提交信息](/cursor-commit)
* [Beta 功能预览](/cursor-beta)
* [键盘快捷键](/cursor-shortcuts)

---

## 什么是 Composer？

Composer 是 Cursor 中的一个强大工具，让您能够使用 AI 同时编辑多个文件。它提供了一个统一的界面，您可以在其中：

- 同时查看和编辑多个文件
- 让 AI 理解整个代码库的上下文
- 实现跨越多个文件的连贯变更
- 自然地与 AI 对话，解释您想要的更改

Composer 特别适合需要修改分布在多个文件中的代码的任务，如添加新功能、修复复杂 bug 或进行大规模重构。

## 如何启动 Composer

有多种方式可以打开 Composer：

1. **使用键盘快捷键**：
   - 按下 `Ctrl+I` / `⌘+I` 打开 Composer 在侧边
   - 按下 `Ctrl+Shift+I` / `⌘+Shift+I` 打开全屏 Composer

2. **通过界面按钮**：
   - 点击状态栏中的 Composer 图标
   - 或从命令面板中选择 "打开 Composer"

## Composer 界面

Composer 界面由几个主要部分组成：

### 文件侧边栏

左侧的文件侧边栏显示当前在 Composer 会话中打开的所有文件。您可以：

- 点击文件名切换到该文件
- 使用 "+" 按钮添加更多文件
- 使用拖放重新排列文件
- 通过文件名旁的关闭按钮从会话中移除文件

### 编辑区域

中央区域是编辑器，显示选定文件的内容。您可以：

- 直接在此区域编辑代码
- 查看 AI 建议的更改
- 在不同文件之间切换以查看和编辑它们

### 聊天界面

底部是与 AI 交流的聊天界面，您可以：

- 描述您想要的更改
- 提出问题或寻求解释
- 要求 AI 修改之前的建议
- 提供关于 AI 更改的反馈

## 使用 Composer 的两种模式

Composer 有两种主要的使用模式：

### 1. 直接编辑模式

在这种模式下，您可以直接与 AI 交流，描述您想要的更改，AI 会建议代码更改。要使用直接编辑模式：

1. 将相关文件添加到 Composer
2. 在聊天界面中描述您想要的更改
3. 审查 AI 提供的更改建议
4. 应用或修改这些建议
5. 继续对话，迭代改进解决方案

此模式适合于明确知道您需要的更改，但希望 AI 帮助实现的情况。

### 2. Agent 模式

在 Agent 模式下，AI 会更主动地帮助您，执行更复杂的任务，包括：

1. 自动探索代码库以了解上下文
2. 主动识别需要更改的文件
3. 运行命令来测试更改或获取更多信息
4. 分解复杂任务并逐步解决

要切换到 Agent 模式：

1. 在 Composer 中点击模式切换按钮（通常在右上角）
2. 选择 "Agent" 模式
3. 描述您想要实现的更广泛的目标

Agent 模式适合更复杂的任务，当您可能不确定需要更改哪些文件或如何实现特定功能时。

## 使用技巧

### 添加有效的上下文

为了获得最佳结果，确保 Composer 拥有足够的上下文：

1. **包含相关文件**：添加与您的任务直接相关的所有文件
2. **添加接口文件**：包含定义数据结构和 API 的文件，即使您不打算修改它们
3. **考虑依赖关系**：添加将受到更改影响的文件

### 清晰的沟通

与 AI 沟通时：

1. **具体描述目标**：明确说明您想要实现什么
2. **提供例子**：使用示例说明您期望的行为
3. **分步骤指导**：对于复杂任务，将其分解为更小的步骤
4. **提供反馈**：告诉 AI 哪些建议有用，哪些需要改进

### 高效工作流程

1. **从小开始**：先处理小的、定义明确的更改，然后逐步扩展到更复杂的任务
2. **频繁应用更改**：应用好的建议，然后继续对话
3. **保持专注**：每个 Composer 会话专注于一个相关任务
4. **使用会话历史**：Composer 会记住之前的对话，利用这点构建连续的解决方案

## 高级功能

### 代码引用

在与 AI 交流时，您可以引用特定代码：

1. 使用三个反引号（\`\`\`）标记代码块
2. 使用 `@filename:lineNumber` 引用特定文件和行
3. 复制粘贴相关代码段到聊天中

### 文件差异查看

Composer 可以显示原始代码与 AI 建议之间的差异：

1. 当 AI 提供更改建议时，会显示差异视图
2. 绿色突出显示新添加的代码
3. 红色突出显示被删除的代码
4. 使用差异视图按钮切换不同的查看模式

### 会话管理

管理您的 Composer 会话：

1. **保存会话**：Composer 会自动保存您的会话，您可以稍后返回
2. **给会话命名**：为重要会话提供描述性名称
3. **浏览历史会话**：通过历史记录查看以前的会话
4. **导出会话**：保存重要的对话和更改记录

## 使用场景

### 新功能开发

Composer 非常适合实现跨多个文件的新功能：

1. 添加相关的现有文件
2. 描述您想要添加的功能
3. 与 AI 讨论实现细节
4. 逐步审查和应用更改
5. 测试并迭代改进

### 大型重构

重构复杂代码时：

1. 添加需要重构的文件
2. 清晰描述重构目标（如改进性能、提高可读性）
3. 让 AI 分析现有代码并提出重构建议
4. 分阶段应用更改
5. 测试每个阶段以确保功能完整性

### 复杂 Bug 修复

对于跨多个文件的 bug：

1. 添加含有问题代码的文件
2. 描述错误行为和期望行为
3. 提供错误消息、堆栈跟踪或日志（如有）
4. 与 AI 一起分析问题根本原因
5. 审查和应用修复

## 故障排除

### 常见问题

1. **AI 提供不相关的更改**
   - 添加更多相关文件以提供更好的上下文
   - 更具体地描述您的需求
   - 提供示例或参考现有代码

2. **性能或响应速度慢**
   - 减少一个会话中打开的文件数量
   - 对于大型项目，更有针对性地选择文件
   - 考虑将任务分解为多个较小的会话

3. **修改错误的文件**
   - 明确指出应该修改哪些文件
   - 临时从会话中移除不应该被修改的文件

### 获取帮助

如果您在使用 Composer 时遇到问题：

- 查看 Cursor 的常见问题解答和故障排除指南
- 访问 [Cursor 社区论坛](https://forum.cursor.com) 寻求帮助
- 通过 Cursor 界面提交反馈

---

## 键盘快捷键

以下是 Composer 的一些有用快捷键：

| 操作 | Windows/Linux | macOS |
|------|--------------|-------|
| 打开侧边 Composer | Ctrl+I | ⌘+I |
| 打开全屏 Composer | Ctrl+Shift+I | ⌘+Shift+I |
| 在文件间切换 | Ctrl+Tab | ⌘+Tab |
| 添加文件 | Ctrl+O | ⌘+O |
| 发送消息 | Enter | Enter |
| 开始新行 | Shift+Enter | Shift+Enter |
| 应用建议的更改 | Alt+A | Option+A |
| 关闭 Composer | Esc | Esc |

---

Composer 是 Cursor 最强大的功能之一，特别是对于需要对代码库进行广泛更改的任务。通过结合多文件编辑和智能 AI 对话，它成为复杂编码任务的理想工具。

如有任何问题，请参考[常见问题解答](/cursor-faq)或访问[社区论坛](https://forum.cursor.com)寻求帮助。 