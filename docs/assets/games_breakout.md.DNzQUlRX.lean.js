import{_ as Q,h as o,l as Z,A as ee,c as p,m as r,a2 as s,e as S,t as B,F as q,a as C,o as m,q as ae,s as le}from"./chunks/framework.B3gFn30p.js";const te=g=>(ae("data-v-c8c05c6c"),g=g(),le(),g),ue={class:"game-container"},ve={class:"game-controls"},ne={key:0,class:"direction-controls"},oe={class:"game-buttons"},se={class:"game-instructions"},ie=te(()=>r("br",null,null,-1)),fe=JSON.parse('{"title":"打砖块","description":"","frontmatter":{"title":"打砖块"},"headers":[],"relativePath":"games/breakout.md","filePath":"games/breakout.md","lastUpdated":1737369701000}'),ce={name:"games/breakout.md"},re=Object.assign(ce,{setup(g){const d=o(!1),i=o(!1),k=o(0),b=o(3),f=o(!1),n=o(800),h=o(600),w=o(!1),c=o(null),t=o(null),e=o({x:0,y:0,dx:3,dy:-3,radius:8,speed:4}),a=o({x:0,width:100,height:15,speed:6,dx:0}),_=5,L=9,M=80,E=20,A=10,z=50,U=35,x=o([]);function R(){const l=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEEAD"];for(let u=0;u<L;u++){x.value[u]=[];for(let v=0;v<_;v++)x.value[u][v]={x:0,y:0,status:1,color:l[v]}}}function V(){t.value&&(t.value.beginPath(),t.value.arc(e.value.x,e.value.y,e.value.radius,0,Math.PI*2),t.value.fillStyle="#333",t.value.fill(),t.value.closePath())}function X(){t.value&&(t.value.beginPath(),t.value.roundRect(a.value.x,h.value-a.value.height,a.value.width,a.value.height,8),t.value.fillStyle="#333",t.value.fill(),t.value.closePath())}function $(){if(t.value){for(let l=0;l<L;l++)for(let u=0;u<_;u++)if(x.value[l][u].status===1){const v=l*(M+A)+U,W=u*(E+A)+z;x.value[l][u].x=v,x.value[l][u].y=W,t.value.beginPath(),t.value.roundRect(v,W,M,E,4),t.value.fillStyle=x.value[l][u].color,t.value.fill(),t.value.closePath()}}}function j(){t.value&&(t.value.font="20px Arial",t.value.fillStyle="#333",t.value.fillText(`得分: ${k.value}`,8,30))}function G(){t.value&&(t.value.font="20px Arial",t.value.fillStyle="#333",t.value.fillText(`生命: ${b.value}`,n.value-80,30))}function J(){for(let l=0;l<L;l++)for(let u=0;u<_;u++){const v=x.value[l][u];v.status===1&&e.value.x>v.x&&e.value.x<v.x+M&&e.value.y>v.y&&e.value.y<v.y+E&&(e.value.dy=-e.value.dy,v.status=0,k.value+=10,k.value===_*L*10&&(i.value=!0,d.value=!1))}}function Y(){if(e.value.x+=e.value.dx,e.value.y+=e.value.dy,(e.value.x+e.value.dx>n.value-e.value.radius||e.value.x+e.value.dx<e.value.radius)&&(e.value.dx=-e.value.dx),e.value.y+e.value.dy<e.value.radius)e.value.dy=-e.value.dy;else if(e.value.y+e.value.dy>h.value-e.value.radius)if(e.value.x>a.value.x&&e.value.x<a.value.x+a.value.width){const l=(e.value.x-(a.value.x+a.value.width/2))/(a.value.width/2);e.value.dx=l*e.value.speed,e.value.dy=-Math.sqrt(e.value.speed*e.value.speed-e.value.dx*e.value.dx)}else b.value--,b.value===0?(i.value=!0,d.value=!1):(e.value.x=n.value/2,e.value.y=h.value-30,e.value.dx=3,e.value.dy=-3,a.value.x=(n.value-a.value.width)/2)}function K(){a.value.x+=a.value.dx,a.value.x<0?a.value.x=0:a.value.x+a.value.width>n.value&&(a.value.x=n.value-a.value.width)}function D(){t.value&&(t.value.clearRect(0,0,n.value,h.value),$(),V(),X(),j(),G(),J(),d.value&&!f.value&&(Y(),K()),i.value||requestAnimationFrame(D))}function T(l){l.key==="Right"||l.key==="ArrowRight"?a.value.dx=a.value.speed:l.key==="Left"||l.key==="ArrowLeft"?a.value.dx=-a.value.speed:(l.key===" "||l.key==="Spacebar")&&(!d.value&&!i.value?N():f.value=!f.value)}function F(l){(l.key==="Right"||l.key==="ArrowRight"||l.key==="Left"||l.key==="ArrowLeft")&&(a.value.dx=0)}function H(l){l.preventDefault();const u=l.touches[0].clientX-c.value.offsetLeft;u>0&&u<n.value&&(a.value.x=u-a.value.width/2)}function I(){a.value.dx=-a.value.speed}function O(){a.value.dx=a.value.speed}function y(){a.value.dx=0}function N(){i.value&&(k.value=0,b.value=3,R(),i.value=!1),e.value.x=n.value/2,e.value.y=h.value-30,e.value.dx=3,e.value.dy=-3,a.value.x=(n.value-a.value.width)/2,d.value=!0,f.value=!1}function P(){const u=c.value.parentElement.clientWidth;w.value=u<600,n.value=Math.min(800,u),h.value=Math.min(600,u*.75),c.value.width=n.value,c.value.height=h.value,a.value.width=w.value?80:100,a.value.height=w.value?12:15,e.value.radius=w.value?6:8,a.value.x=(n.value-a.value.width)/2}return Z(()=>{t.value=c.value.getContext("2d"),R(),P(),D(),document.addEventListener("keydown",T),document.addEventListener("keyup",F),c.value.addEventListener("touchmove",H),window.addEventListener("resize",P)}),ee(()=>{var l;document.removeEventListener("keydown",T),document.removeEventListener("keyup",F),(l=c.value)==null||l.removeEventListener("touchmove",H),window.removeEventListener("resize",P)}),(l,u)=>(m(),p("div",null,[r("div",ue,[r("canvas",{ref_key:"canvas",ref:c,class:"game-canvas"},null,512),r("div",ve,[w.value?(m(),p("div",ne,[r("button",{class:"direction-btn",onTouchstart:s(I,["prevent"]),onTouchend:s(y,["prevent"]),onMousedown:s(I,["prevent"]),onMouseup:s(y,["prevent"]),onMouseleave:s(y,["prevent"])},"←",32),r("button",{class:"direction-btn",onTouchstart:s(O,["prevent"]),onTouchend:s(y,["prevent"]),onMousedown:s(O,["prevent"]),onMouseup:s(y,["prevent"]),onMouseleave:s(y,["prevent"])},"→",32)])):S("",!0),r("div",oe,[d.value?(m(),p("button",{key:1,onClick:u[0]||(u[0]=v=>f.value=!f.value)},B(f.value?"继续":"暂停"),1)):(m(),p("button",{key:0,onClick:N},B(i.value?"重新开始":"开始游戏"),1))])]),r("div",se,[!d.value&&!i.value?(m(),p(q,{key:0},[C(" 按空格键或点击开始按钮开始游戏"),ie,C(" 使用方向键或触摸控制挡板移动 ")],64)):S("",!0),i.value?(m(),p(q,{key:1},[C(" 游戏结束！得分："+B(k.value),1)],64)):S("",!0)])])]))}}),he=Q(re,[["__scopeId","data-v-c8c05c6c"]]);export{fe as __pageData,he as default};
